(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{123:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(34),a=n(4),o={messages:{dialogsData:[{id:"1",name:"Nazar"},{id:"2",name:"Pavlo"},{id:"3",name:"Sebbe"}],messagesData:[{message:"Go eat"},{message:"Go smoke"},{message:"Go work"}]}},u=function(e){return{type:"ADD-MESSAGE",message:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var n=Object(a.a)({},e);return n.messages.messagesData=[].concat(Object(r.a)(e.messages.messagesData),[{message:t.message}]),n;default:return e}}},128:function(e,t,n){e.exports=n.p+"static/media/ColossalMeekCygnet-size_restricted.9447da79.gif"},130:function(e,t,n){e.exports=n.p+"static/media/logo_720.8fdbb18c.png"},131:function(e,t,n){e.exports={formSummaryError:"Login_formSummaryError__3cy0x"}},14:function(e,t,n){e.exports={nav:"Navbar_nav__2imOE",item:"Navbar_item__zmMk4",active:"Navbar_active__3mbhk"}},161:function(e,t,n){e.exports=n(287)},166:function(e,t,n){},167:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n(86),a=r.create({baseURL:"https://reqres.in/api/users"}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.get("?page="+e).then((function(e){return e.data}))},followUser:function(e,t){return a.put("/"+e,{job:t})},getProfile:function(e){return console.warn("Obsolete method. Use profileAPI instead"),u.getProfile(e)}},u={getProfile:function(e){return a.get("/"+e)},getStatus:function(e){return a.get("/"+e).then((function(e){return e.data.ad.company}))},updateStatus:function(e,t){return a.put("/"+e,{job:t}).then((function(e){return e.data.job}))}},i={login:function(e,t){return r.post("https://reqres.in/api/login",{email:e,password:t})}}},287:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(59),u=n.n(o),i=(n(166),n(24)),s=n(25),c=n(28),l=n(27),f=(n(167),n(14)),m=n.n(f),d=n(12),p=function(){return a.a.createElement("nav",{className:m.a.nav},a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/profile"},"Profile")),a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/dialogs"},"Messages")),a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/users"},"Users")),a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/news"},"News")),a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/music"},"Music")),a.a.createElement("div",{className:m.a.item},a.a.createElement(d.b,{activeClassName:m.a.active,to:"/settings"},"Setting")))},g=n(9),E=function(e){return a.a.createElement("div",null,"News")},h=function(e){return a.a.createElement("div",null,"Music")},b=function(e){return a.a.createElement("div",null,"Settings")},v=n(10),O=n(34),S=n(4),_=n(22),j=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(S.a)(Object(S.a)({},e),r):e}))},w={users:[],pageSize:6,totalUsersCount:0,currentPage:1,isFetching:!0,isAuthorized:!1,followProgress:[]},T=function(e){return{type:"FOLLOW",userId:e}},y=function(e){return{type:"UNFOLLOW",userId:e}},C=function(e){return{type:"SET_FETCHING",isFetching:e}},N=function(e,t){return{type:"FOLLOW_PROGRESS",followProgress:e,id:t}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(S.a)(Object(S.a)({},e),{},{users:j(e.users,"id",t.userId,{followed:!0})});case"UNFOLLOW":return Object(S.a)(Object(S.a)({},e),{},{users:j(e.users,"id",t.userId,{followed:!1})});case"SET_USERS":return Object(S.a)(Object(S.a)({},e),{},{users:Object(O.a)(t.users)});case"SET_CURRENT_PAGE":return Object(S.a)(Object(S.a)({},e),{},{currentPage:t.pageNum});case"SET_TOTAL_USERS_COUNT":return Object(S.a)(Object(S.a)({},e),{},{totalUsersCount:t.total});case"SET_FETCHING":return Object(S.a)(Object(S.a)({},e),{},{isFetching:t.isFetching});case"CHECK_AUTHORIZED":return Object(S.a)(Object(S.a)({},e),{},{isAuthorized:t.isAuthorized});case"FOLLOW_PROGRESS":return Object(S.a)(Object(S.a)({},e),{},{followProgress:t.followProgress?[].concat(Object(O.a)(e.followProgress),[t.id]):e.followProgress.filter((function(e){return e!=t.id}))});default:return e}},P=n(62),U=n.n(P),A=function(e){for(var t=e.totalUsersCount/e.pageSize,n=[],r=1;r<=t;r++)n.push(r);return a.a.createElement("div",null,n.map((function(t){return a.a.createElement("span",{onClick:function(){return e.onPageChanged(t)},className:t===e.currentPage&&U.a.active},t)})))},R=function(e){return a.a.createElement("div",{key:e.user.id},a.a.createElement("span",null,a.a.createElement("div",null,a.a.createElement(d.b,{to:"/profile/"+e.user.id},a.a.createElement("img",{className:U.a.userFoto,src:e.user.avatarUrl,alt:"Profile foto"}))),a.a.createElement("div",null,e.user.followed?a.a.createElement("button",{disabled:e.props.followProgress.some((function(t){return t===e.user.id})),onClick:function(){return e.props.unfollow(e.user.id)}},"Unfollow"):a.a.createElement("button",{disabled:e.props.followProgress.some((function(t){return t===e.user.id})),onClick:function(){return e.props.follow(e.user.id)}},"Follow"))),a.a.createElement("span",null,a.a.createElement("span",null,a.a.createElement("div",null,e.user.fullName),a.a.createElement("div",null,e.user.status)),a.a.createElement("span",null,a.a.createElement("div",null,e.user.location.planet),a.a.createElement("div",null,e.user.location.galaxy))))},z=function(e){return a.a.createElement("div",null,a.a.createElement(A,e),a.a.createElement("div",null,e.users.map((function(t){return a.a.createElement(R,{user:t,props:e})}))))},F=n(60),I=n(129),L=Object(I.a)((function(e){return e.usersReducer.users}),(function(e){return e.filter((function(e){return!0}))})),x=function(e){return e.usersReducer.pageSize},D=function(e){return e.usersReducer.totalUsersCount},G=function(e){return e.usersReducer.currentPage},H=function(e){return e.usersReducer.isFetching},M=function(e){return e.usersReducer.users},W=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.getUsersThunkCreator(t)},e.follow=function(t){e.props.followUser(t,"1")},e.unfollow=function(t){e.props.followUser(t,"0")},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage)}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.props.isFetching&&a.a.createElement(F.a,null),a.a.createElement(z,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,onPageChanged:this.onPageChanged,follow:this.follow,unfollow:this.unfollow,followProgress:this.props.followProgress}))}}]),n}(a.a.Component),J=Object(v.b)((function(e){return{users:L(e),pageSize:x(e),totalUsersCount:D(e),currentPage:G(e),isFetching:H(e),followProgress:M(e)}}),{follow:T,unfollow:y,setFollowProgress:N,getUsersThunkCreator:function(e){return function(t){t(C(!0)),_.c.getUsers(e).then((function(n){var r=n.data.map((function(e){return{id:e.id,fullName:e.first_name+" "+e.last_name,status:"Creator",location:{planet:"Earth",galaxy:"Milky way"},followed:!1,avatarUrl:e.avatar}}));t({type:"SET_CURRENT_PAGE",pageNum:e}),t(C(!1)),t(function(e){return{type:"SET_USERS",users:e}}(r)),t({type:"SET_TOTAL_USERS_COUNT",total:n.total})}))}},followUser:function(e,t){return function(n){n(N(!0,e)),JSON.parse(sessionStorage.getItem("isAuthorized")).authorized?(_.c.followUser(e,t).then((function(){n("1"===t?T(e):y(e))})),n(N(!1,e))):(n(N(!1,e)),alert("You are not authorized"))}}})(W),K=n(50),X=n.n(K),Z=n(130),q=n.n(Z),V=n(125),B=n(67),Q=n(68),Y=n(131),$=n.n(Y),ee=n(124),te=function(e,t,n,r,o){return a.a.createElement(ee.a,Object.assign({name:e,placeholder:t,component:n,validate:r},o))},ne=Object(V.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return a.a.createElement("form",{onSubmit:t},a.a.createElement("label",{htmlFor:"email"},"Email"),a.a.createElement("div",null,te("email","email",B.a,[Q.b])),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement("div",null,te("password","password",B.a,[Q.b],{type:"password"})),a.a.createElement("div",null,te("remember",null,"input",null,{type:"checkbox"}),"Remember me"),n&&a.a.createElement("div",{className:$.a.formSummaryError},n),a.a.createElement("button",null,"Login"))})),re=Object(v.b)((function(e){return{isAuthorized:sessionStorage.getItem("isAuthorized")}}),{})((function(e){return a.a.createElement("div",null,a.a.createElement("h1",null,"LOGIN"),a.a.createElement(ne,{onSubmit:function(t){e.onSubmit(t.email,t.password)}}))})),ae=n(40),oe={token:null,isAuthorized:null!==sessionStorage.getItem("isAuthorized")&&sessionStorage.getItem("isAuthorized")},ue=function(e){return{type:"SET_TOKEN",token:e}},ie=function(e){return{type:"SET_AUTHORAIZED",isAuthorized:e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(S.a)(Object(S.a)({},e),{},{token:t.token});case"SET_AUTHORAIZED":return Object(S.a)(Object(S.a)({},e),{},{isAuthorized:t.isAuthorized});default:return e}},ce=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).authorization=function(t,n){e.props.loginThunkCreator(t,n)},e}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(re,Object.assign({},this.props,{onSubmit:this.authorization}))}}]),n}(a.a.Component),le=Object(v.b)((function(e){return{token:e.authReducer.token,isAuthorized:e.authReducer.isAuthorized}}),{setToken:ue,setAuthorized:ie,loginThunkCreator:function(e,t){return function(n){_.a.login(e,t).then((function(e){if(e.data.token){n(ue(e.data.token));var t={authorized:!0,expiry:(new Date).getTime()};sessionStorage.setItem("isAuthorized",JSON.stringify(t)),n(ie(JSON.stringify(t)))}})).catch((function(e){n(Object(ae.a)("login",{_error:e.response.data.error}))}))}}})(ce),fe=function(e){var t,n=JSON.parse(e.isAuthorized).authorized;return t=n?a.a.createElement("button",{onClick:function(){e.logout()}},"Log out"):a.a.createElement(d.b,{className:X.a.token,to:"/login"},n?"Logged in":"Login"),a.a.createElement("header",{className:X.a.header},a.a.createElement("img",{src:q.a,alt:"aviasecrets"}),a.a.createElement("div",{className:X.a.login},t,a.a.createElement(le,null)),a.a.createElement("span",{className:X.a.token},n&&"true"))},me=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).logout=function(){sessionStorage.setItem("isAuthorized",JSON.stringify({authorized:!1,expiry:0})),e.props.setAuthorized(!1)},e}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(fe,Object.assign({},this.props,{logout:this.logout}))}}]),n}(a.a.Component),de=Object(v.b)((function(e){return{token:e.authReducer.token,isAuthorized:e.authReducer.isAuthorized}}),{setToken:ue,setAuthorized:ie})(me),pe=n(8),ge={initStatus:!1},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_STATUS":return Object(S.a)(Object(S.a)({},e),{},{initStatus:t.status});default:return e}},he=n(91),be=n(123),ve=n(134),Oe=n(126),Se=Object(pe.c)({profileReducer:he.b,messageReducer:be.b,usersReducer:k,authReducer:se,appReducer:Ee,form:Oe.a}),_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.d,je=Object(pe.e)(Se,_e(Object(pe.a)(ve.a))),we=function(e){return function(t){return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},a.a.createElement(e,t))}},Te=a.a.lazy((function(){return n.e(4).then(n.bind(null,293))})),ye=a.a.lazy((function(){return n.e(3).then(n.bind(null,292))})),Ce=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initThunk()}},{key:"render",value:function(){return this.props.initStatus?a.a.createElement("div",{className:"wrapper"},a.a.createElement(de,null),a.a.createElement(p,null),a.a.createElement("div",{className:"wrapper-content"},a.a.createElement(g.b,{path:"/dialogs",render:we(Te)}),a.a.createElement(g.b,{path:"/profile/:userId?",render:we(ye)}),a.a.createElement(g.b,{exact:!0,path:"/users",render:function(){return a.a.createElement(J,null)}}),a.a.createElement(g.b,{exact:!0,path:"/news",render:function(){return a.a.createElement(E,null)}}),a.a.createElement(g.b,{exact:!0,path:"/music",render:function(){return a.a.createElement(h,null)}}),a.a.createElement(g.b,{exact:!0,path:"/settings",render:function(){return a.a.createElement(b,null)}}),a.a.createElement(g.b,{exact:!0,path:"/login",render:function(){return a.a.createElement(le,null)}}))):a.a.createElement(F.a,null)}}]),n}(a.a.Component),Ne=Object(pe.d)(Object(v.b)((function(e){return{initStatus:e.appReducer.initStatus}}),{initThunk:function(){return function(e){Promise.all([]).then((function(){e({type:"INIT_STATUS",status:!0})}))}}}),g.f)(Ce),ke=function(e){return a.a.createElement(d.a,{basename:"/samurai"},a.a.createElement(v.a,{store:je},a.a.createElement(Ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),window.store=je},50:function(e,t,n){e.exports={header:"Header_header__1VCKf",login:"Header_login__3V3Qa",token:"Header_token__X84J4"}},60:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(128),u=n.n(o);t.a=function(){return a.a.createElement("img",{src:u.a,alt:""})}},62:function(e,t,n){e.exports={userFoto:"Users_userFoto__SMlLW",active:"Users_active__igCDk"}},67:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(135),a=n(0),o=n.n(a),u=n(87),i=n.n(u),s=function(e){return function(t){var n=t.input,a=t.meta,u=Object(r.a)(t,["input","meta"]),s=a.touched&&a.error;return o.a.createElement("div",{className:i.a.formControl+" "+(s&&i.a.error)},o.a.createElement("div",null,o.a.createElement(e,Object.assign({},u,n))),o.a.createElement("div",null,s&&o.a.createElement("span",null,a.error)))}},c=s("textarea"),l=s("input")},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"This field is required"},a=function(e){return function(t){if(t&&t.length>e)return"Text length must be under ".concat(e)}}},87:function(e,t,n){e.exports={formControl:"FormControl_formControl__2LKrZ",error:"FormControl_error__2AXtT"}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return E}));var r=n(90),a=n.n(r),o=n(133),u=n(34),i=n(4),s=n(22),c="profile/ADD-POST",l={postsData:[{id:1,text:"1. Hi from attribute message",likesCount:1},{id:2,text:"2. Hi from attribute message",likesCount:1},{id:3,text:"3. Hi from attribute message",likesCount:1}],userProfile:null,status:""},f=function(e){return{type:c,post:e}},m=function(e){return{type:"profile/SET_USER_PROFILE",userProfile:e}},d=function(e){return{type:"profile/SET_USER_PROFILE_STATUS",status:e}},p=function(e){return function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.getProfile(e);case 2:r=t.sent,n(m(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(t){s.b.getStatus(e).then((function(e){t(d(e))}))}},E=function(e,t){return function(n){s.b.updateStatus(e,t).then((function(e){n(d(e))}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:4,text:t.post,likesCount:0};return Object(i.a)(Object(i.a)({},e),{},{postsData:[].concat(Object(u.a)(e.postsData),[n]),newPostText:""});case"profile/SET_USER_PROFILE":return Object(i.a)(Object(i.a)({},e),{},{userProfile:t.userProfile});case"profile/SET_USER_PROFILE_STATUS":return Object(i.a)(Object(i.a)({},e),{},{status:t.status});case"profile/DELETE_POST":return Object(i.a)(Object(i.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});default:return e}}}},[[161,1,2]]]);
//# sourceMappingURL=main.d2745adf.chunk.js.map